<div class="container mt-4">
  <!-- Create Workout Button -->
  <button class="btn btn-primary mb-4" onclick="toggleWorkoutForm()">Create Workout</button>

  <!-- Workout Creation Form (Hidden by default) -->
  <div id="workoutForm" class="card mb-4" style="display: none;">
    <div class="card-body">
      <h3>Create New Workout</h3>
      <form>
        <div class="form-group mb-3">
          <label for="workoutName">Workout Name</label>
          <input type="text" class="form-control" id="workoutName" required>
        </div>
        
        <div class="form-group mb-3">
          <label for="workoutDescription">Description</label>
          <textarea class="form-control" id="workoutDescription" rows="3"></textarea>
        </div>

        <div id="blocksContainer">
          <!-- Single Block -->
          <div class="block card mb-3">
            <div class="card-body">
              <h5>Block 1</h5>
              <div class="exercises">
                <!-- Single Exercise -->
                <div class="exercise-entry border p-3 mb-2">
                  <div class="row">
                    <div class="col">
                      <input type="text" class="form-control" placeholder="Exercise Name" required>
                    </div>
                    <div class="col">
                      <input type="number" class="form-control" placeholder="Sets" required>
                    </div>
                    <div class="col">
                      <input type="number" class="form-control" placeholder="Reps" required>
                    </div>
                    <div class="col">
                      <input type="number" class="form-control" placeholder="Weight" required>
                    </div>
                    <div class="col-auto">
                      <button type="button" class="btn btn-danger" onclick="removeExercise(this)">Remove</button>
                    </div>
                  </div>
                </div>
              </div>
              <button type="button" class="btn btn-secondary mt-2" onclick="addExercise(this)">Add Exercise</button>
            </div>
          </div>
        </div>

        <button type="button" class="btn btn-info mb-3" onclick="addBlock()">Add Block</button>
        <button type="submit" class="btn btn-success">Save Workout</button>
      </form>
    </div>
  </div>

  <!-- Saved Workouts Section -->
  <div class="card mb-4">
    <div class="card-header">
      <h3>Saved Workouts</h3>
    </div>
    <div class="card-body">
      <div class="list-group">
        <div class="list-group-item">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h5>Upper Body Workout</h5>
              <p class="mb-0">Focus on chest and shoulders</p>
            </div>
            <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#workoutModal" 
                    onclick="showWorkoutDetails('Upper Body Strength')">View Workout</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Created Workouts Section -->
  <div class="card">
    <div class="card-header">
      <h3>Your Created Workouts</h3>
    </div>
    <div class="card-body">
      <div class="list-group">
        <div class="list-group-item">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h5>Leg Day</h5>
              <p class="mb-0">Complete lower body workout</p>
            </div>
            <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#workoutModal"
                    onclick="showWorkoutDetails('Lower Body Power')">View Workout</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Workout Details Modal -->
  <div class="modal fade" id="workoutModal" tabindex="-1" aria-labelledby="workoutModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="workoutModalLabel">Workout Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="workoutDetails">
          <!-- Workout details will be inserted here -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function toggleWorkoutForm() {
    const form = document.getElementById('workoutForm');
    form.style.display = form.style.display === 'none' ? 'block' : 'none';
  }

  function addExercise(button) {
    const exercisesDiv = button.parentElement.querySelector('.exercises');
    const newExercise = document.createElement('div');
    newExercise.className = 'exercise-entry border p-3 mb-2';
    newExercise.innerHTML = `
      <div class="row">
        <div class="col">
          <input type="text" class="form-control" placeholder="Exercise Name" required>
        </div>
        <div class="col">
          <input type="number" class="form-control" placeholder="Sets" required>
        </div>
        <div class="col">
          <input type="number" class="form-control" placeholder="Reps" required>
        </div>
        <div class="col">
          <input type="number" class="form-control" placeholder="Weight" required>
        </div>
        <div class="col-auto">
          <button type="button" class="btn btn-danger" onclick="removeExercise(this)">Remove</button>
        </div>
      </div>
    `;
    exercisesDiv.appendChild(newExercise);
  }

  function removeExercise(button) {
    button.closest('.exercise-entry').remove();
  }

  function addBlock() {
    const blocksContainer = document.getElementById('blocksContainer');
    const blockCount = blocksContainer.children.length + 1;
    
    const newBlock = document.createElement('div');
    newBlock.className = 'block card mb-3';
    newBlock.innerHTML = `
      <div class="card-body">
        <h5>Block ${blockCount}</h5>
        <div class="exercises">
          <div class="exercise-entry border p-3 mb-2">
            <div class="row">
              <div class="col">
                <input type="text" class="form-control" placeholder="Exercise Name" required>
              </div>
              <div class="col">
                <input type="number" class="form-control" placeholder="Sets" required>
              </div>
              <div class="col">
                <input type="number" class="form-control" placeholder="Reps" required>
              </div>
              <div class="col">
                <input type="number" class="form-control" placeholder="Weight" required>
              </div>
              <div class="col-auto">
                <button type="button" class="btn btn-danger" onclick="removeExercise(this)">Remove</button>
              </div>
            </div>
          </div>
        </div>
        <button type="button" class="btn btn-secondary mt-2" onclick="addExercise(this)">Add Exercise</button>
      </div>
    `;
    blocksContainer.appendChild(newBlock);
  }

  function showWorkoutDetails(workoutName) {
    const workoutData = {
      'Upper Body Strength': {
        blocks: [
          {
            name: 'Chest & Shoulders',
            exercises: [
              { name: 'Bench Press', sets: 4, reps: 10, weight: '135 lbs' },
              { name: 'Shoulder Press', sets: 3, reps: 12, weight: '95 lbs' }
            ]
          },
          {
            name: 'Back & Arms',
            exercises: [
              { name: 'Pull-ups', sets: 3, reps: 8, weight: 'Body weight' },
              { name: 'Bicep Curls', sets: 3, reps: 12, weight: '30 lbs' }
            ]
          }
        ]
      },
      'Lower Body Power': {
        blocks: [
          {
            name: 'Quads & Glutes',
            exercises: [
              { name: 'Squats', sets: 4, reps: 8, weight: '185 lbs' },
              { name: 'Lunges', sets: 3, reps: 12, weight: '95 lbs' }
            ]
          }
        ]
      }
    };

    const workout = workoutData[workoutName];
    const modalTitle = document.getElementById('workoutModalLabel');
    const modalBody = document.getElementById('workoutDetails');
    
    modalTitle.textContent = workoutName;
    
    let html = '<div class="workout-blocks">';
    workout.blocks.forEach((block, blockIndex) => {
      html += `
        <div class="block mb-4">
          <h4 class="mb-3">Block ${blockIndex + 1}: ${block.name}</h4>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>Exercise</th>
                  <th>Sets</th>
                  <th>Reps</th>
                  <th>Weight</th>
                </tr>
              </thead>
              <tbody>
                ${block.exercises.map(exercise => `
                  <tr>
                    <td>${exercise.name}</td>
                    <td>${exercise.sets}</td>
                    <td>${exercise.reps}</td>
                    <td>${exercise.weight}</td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          </div>
        </div>
      `;
    });
    html += '</div>';
    
    modalBody.innerHTML = html;
  }
</script>